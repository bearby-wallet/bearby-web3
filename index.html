<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="icon" type="image/x-icon" href="./favicon.ico">
  <script type="module" src="./dist//index.js"></script>
  <script type="module">
    import * as massaWeb3 from 'https://cdn.jsdelivr.net/npm/@massalabs/massa-web3@latest/+esm'
    window['massaWeb3'] = massaWeb3
  </script>
</head>
<body>
  <button onclick="deploy()">deploy</button>
  <button onclick="executeBytecode()">executeBytecode</button>
  <button onclick="accountBalance()">Account balance</button>
  <button onclick="readBalance()">readBalance</button>
  <button onclick="getNodesStatus()">getNodesStatus</button>
  <button onclick="transfer()">transfer</button>
  <button onclick="disconnect()">disconect</button>
  <button onclick="connect()">conect</button>
  <button onclick="test_sign()">sign message</button>
  <button onclick="test_req_pub_key()">get pubkey</button>
  <button onclick="testunsafe()">test unsafe</button>
  <button onclick="tryReadContract()">try read contract</button>
  <button onclick="tryReadContractWithUnsafeParams()">try read contract with unsafe params</button>
  <button onclick="getDatastoreEntries()">Get datastore entry</button>
  <button onclick="test_payment()">test payment</button>

  <script >
    // Buildnet contract
    const USDC = 'AS12k8viVmqPtRuXzCm6rKXjLgpQWqbuMjc37YHhB452KSUUb9FgL'
    let massaWeb3;

    async function disconnect() {
      const status = await bearby.wallet.disconnect();
      console.log(status);
    }
    async function accountBalance() {
       const account = bearby.wallet.account.base58;
       const res = await bearby.massa.getAddresses(account);
       const { final_balance, candidate_balance } = res.result[0];
       console.log(final_balance, candidate_balance);
    }
    async function connect() {
      console.log(bearby.wallet.installed);
      const status = await bearby.wallet.connect();
      console.log(bearby.wallet.installed);
      console.log(status);
      massaWeb3 = window['massaWeb3']
    }

    async function tryReadContract() {
       const account = bearby.wallet.account.base58;
        const result = await bearby.contract.readSmartContract(
          {
            fee: 0,
            maxGas: 4294167295,
            simulatedGasPrice: 0,
            targetAddress: "AS1CNmKBzXY3jwkqempmrv95wZUMqBHRBAQK3G4vicb3WpxZAy3e",
            targetFunction: "getMessage",
            parameter: [],
            callerAddress: account
          }
        );
      console.log(result);
    }
    async function tryReadContractWithUnsafeParams() {
      const account = bearby.wallet.account.base58;
       const Args = massaWeb3.Args;
       if(!Args) {
         console.error('Massa-web3 is not loaded. please connect wallet first')
         return
       }
       const unsafeParameters = new Args().addString(account).serialize();
        const result = await bearby.contract.readSmartContract(
          {
            maxGas: 4294167295,
            targetAddress: USDC,
            targetFunction: "balanceOf",
            parameter: Array.from(unsafeParameters),
          }
        );
      console.log(result);
    }
    async function deploy() {
      const hash = await bearby.contract.deploy({
          fee: 10_000_0000n,
          maxGas: 3980167295n,
          maxCoins: 1_000_000_0000n,
          coins: 100000000n,
          parameters: [
            {
              type: bearby.contract.types.STRING,
              value: "Hello, World!"
            }
          ],
          deployerBase64: "AGFzbQEAAAABWA9gAX8Bf2AAAGACf38AYAJ/fwF/YAN/f38Bf2ADf39/AGABfwBgAX8BfmABfgF/YAR/f39+AX9gBH9/f38AYAJ/fgBgA39+fwF/YAR/f39/AX9gAn9+AX8C4gEHA2VudgVhYm9ydAAKBW1hc3NhGmFzc2VtYmx5X3NjcmlwdF9oYXNfb3Bfa2V5AAAFbWFzc2EbYXNzZW1ibHlfc2NyaXB0X2dldF9vcF9kYXRhAAAFbWFzc2EZYXNzZW1ibHlfc2NyaXB0X2NyZWF0ZV9zYwAABW1hc3NhH2Fzc2VtYmx5X3NjcmlwdF9mdW5jdGlvbl9leGlzdHMAAwVtYXNzYRRhc3NlbWJseV9zY3JpcHRfY2FsbAAJBW1hc3NhHmFzc2VtYmx5X3NjcmlwdF9nZW5lcmF0ZV9ldmVudAAGA1VUBQICBgIAAgICAgMDBAQEAQEBAQEBAQEBAQEBAAAFBQMAAAAACwIMDQAEAwcHAAAAAAcICAMOAAICBAAAAAMCAgIEAwAABQAAAAMAAwkDBgAABgEBBAUBcAEBAQUDAQABBkEMfwFBAAt/AUEAC38AQQALfwBBAQt/AEECC38AQQALfwFBAAt/AUEAC38AQbACC38AQdACC38AQYAJC38AQbwJCwdFBwRtYWluAFYFX19uZXcAEQVfX3BpbgBXB19fdW5waW4AWAlfX2NvbGxlY3QAWQtfX3J0dGlfYmFzZQMKBm1lbW9yeQIACAFaCQYBAEEBCwAMARMK7xNUAwABCxEAIAAgATYCBCAAIAFBABAHCwkAIAAgATYCAAtgAQZ/PwAhASABQRB0QQ9qQQ9Bf3NxIQIgACACSwRAIAAgAmtB//8DakH//wNBf3NxQRB2IQMgASIEIAMiBSAEIAVKGyEGIAZAAEEASARAIANAAEEASARAAAsLCyAAJAELCQAgACABNgIAC1MBBH8gAEH8////A0sEQEEgQeAAQSFBHRAAAAsjASEBIwFBBGohAgJ/IAAhAyADQQRqQQ9qQQ9Bf3NxQQRrDAALIQQgAiAEahAKIAEgBBALIAIPCwkAIAAgATYCBAsJACAAIAE2AggLCQAgACABNgIMCwkAIAAgATYCEAtLAQJ/IABB7P///wNLBEBBIEHgAEHWAEEeEAAAC0EQIABqEAwhAiACQQRrIQMgA0EAEA0gA0EAEA4gAyABEA8gAyAAEBAgAkEQag8LQQECfyABQfz///8DQQB2SwRAQaABQdABQTNBPBAAAAsgAUEAdCECIAJBBRARIQNBACMERxogA0EAIAL8CwAgAw8LLgAgAEUEQEEIQQQQESEACyAAQQAQCSAAQQBBABASEAggACABEAggACACEAkgAAseAQF/IAAgARARIQMgAgRAIAMgAiAA/AoAAAsgAw8LMAEBfwJAAkACQAJAIwYOAwECAwALAAtBAEEFQZACEBQhAQtBACECCyAAIAEgAhATCycAIwtBBGpBD2pBD0F/c3FBBGskACMAJAFBAEEAQQAkBkEAEBUkBwsEABAWCwQAEBcLBAAQGAsEABAZCwQAEBoLBAAQGwsEABAcCwQAEB0LBAAQHgsEABAfCwQAECALBwAgACgCEAsNACAAQRRrECJBAHYPCxIAIAAgAUEAdGogAjoAAEEAGgsiACABIAAQI08EQEGAA0HQAUHdAEEpEAAACyAAIAEgAhAkCy8BAX8gASAAECNPBEBBgANB0AFBzgBBKRAAAAsgACABQQB0ai0AACECQQAaIAIPCxEBAX8gABABIQEgAUEAECYPCwcAIAAQAg8LBwAgACgCAAsHACAAKAIECwkAIAAgATcDAAsRACAAIAE2AgggACABQQAQBwseACAARQRAQQxBBxARIQALIAAgARArIAAgAhAsIAALRAEDfyAAIAF0IQQgBEEBIAMQFCEFQRAgAhARIQYgBiAFNgIAIAYgBUEAEAcgBiAFNgIEIAYgBDYCCCAGIAA2AgwgBg8LBwAgACgCBAurAQEPfyAAECMhAyABQQBIBH8gASADaiIEQQAiBSAEIAVKGwUgASIGIAMiByAGIAdIGwshASACQQBIBH8gAiADaiIIQQAiCSAIIAlKGwUgAiIKIAMiCyAKIAtIGwshAiACIAFrIgxBACINIAwgDUobIQMgACABQQB0aiEOIANBAHQhDyAAIRBBARogA0EAQQhBABAuIRAgEBAvIRFBABogESAOIA/8CgAAIBAPCxYAIAAQKiAAECkgABApIAFqEDAQLw8LDABBAUUaIAApAwAPCwcAIAAQMg8LPQEBfiAAEClBCGogABAqECNKBEBBAEIAQeADEC0PCyAAQQgQMRAzIQEgACAAEClBCGoQCUEAIAFBABAtDwsHACAAKAIICw0A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",
          contractDataBase64: "AGFzbQEAAAABKQhgAX8AYAJ/fwF/YAAAYAF/AX9gAn9/AGAAAX9gBH9/f38AYAN/f38AAmQDA2VudgVhYm9ydAAGBW1hc3NhJ2Fzc2VtYmx5X3NjcmlwdF9jYWxsZXJfaGFzX3dyaXRlX2FjY2VzcwAFBW1hc3NhHmFzc2VtYmx5X3NjcmlwdF9nZW5lcmF0ZV9ldmVudAAAAxoZAAACBAQHAgUBAQMAAgACAwEBAwEDAQAEAAUDAQABBkUNfwFBAAt/AUEAC38BQQALfwFBAAt/AUEAC38BQQALfwFBAAt/AUEAC38BQQALfwFBAAt/AUEAC38AQbASC38BQeCSAgsHTAcFX19uZXcADAVfX3BpbgANB19fdW5waW4ADglfX2NvbGxlY3QADwtfX3J0dGlfYmFzZQMLBm1lbW9yeQIAC2NvbnN0cnVjdG9yABkIAREMASUKyS8ZYQEBfyAAKAIEQXxxIgFFBEAgACgCCEUgAEHgkgJJcUUEQEEAQaAIQYABQRIQAAALDwsgACgCCCIARQRAQQBBoAhBhAFBEBAAAAsgASAANgIIIAAgASAAKAIEQQNxcjYCBAufAQEDfyAAIwFGBEAgACgCCCIBRQRAQQBBoAhBlAFBHhAAAAsgASQBCyAAEAMjAiEBIAAoAgwiAkECTQR/QQEFIAJBsBIoAgBLBEBBgAlBwAlBFUEcEAAACyACQQJ0QbQSaigCAEEgcQshAyABKAIIIQIgACMARUECIAMbIAFyNgIEIAAgAjYCCCACIAAgAigCBEEDcXI2AgQgASAANgIIC3IBAn9BgAkQG0GwCxAbQfAJEBtBwBEQG0GAEhAbIwoiAARAIAAQGwtBwAwQGyMHIgEoAgRBfHEhAANAIAAgAUcEQCAAKAIEQQNxQQNHBEBBAEGgCEGgAUEQEAAACyAAQRRqEBAgACgCBEF8cSEADAELCwuUAgEEfyABKAIAIgJBAXFFBEBBAEHwCkGMAkEOEAAACyACQXxxIgJBDEkEQEEAQfAKQY4CQQ4QAAALIAJBgAJJBH8gAkEEdgVBH0H8////AyACIAJB/P///wNPGyICZ2siBEEHayEDIAIgBEEEa3ZBEHMLIgJBEEkgA0EXSXFFBEBBAEHwCkGcAkEOEAAACyABKAIIIQUgASgCBCIEBEAgBCAFNgIICyAFBEAgBSAENgIECyABIAAgA0EEdCACakECdGooAmBGBEAgACADQQR0IAJqQQJ0aiAFNgJgIAVFBEAgACADQQJ0aiIBKAIEQX4gAndxIQIgASACNgIEIAJFBEAgACAAKAIAQX4gA3dxNgIACwsLC8MDAQV/IAFFBEBBAEHwCkHJAUEOEAAACyABKAIAIgNBAXFFBEBBAEHwCkHLAUEOEAAACyABQQRqIAEoAgBBfHFqIgQoAgAiAkEBcQRAIAAgBBAGIAEgA0EEaiACQXxxaiIDNgIAIAFBBGogASgCAEF8cWoiBCgCACECCyADQQJxBEAgAUEEaygCACIBKAIAIgZBAXFFBEBBAEHwCkHdAUEQEAAACyAAIAEQBiABIAZBBGogA0F8cWoiAzYCAAsgBCACQQJyNgIAIANBfHEiAkEMSQRAQQBB8ApB6QFBDhAAAAsgBCABQQRqIAJqRwRAQQBB8ApB6gFBDhAAAAsgBEEEayABNgIAIAJBgAJJBH8gAkEEdgVBH0H8////AyACIAJB/P///wNPGyICZ2siA0EHayEFIAIgA0EEa3ZBEHMLIgJBEEkgBUEXSXFFBEBBAEHwCkH7AUEOEAAACyAAIAVBBHQgAmpBAnRqKAJgIQMgAUEANgIEIAEgAzYCCCADBEAgAyABNgIECyAAIAVBBHQgAmpBAnRqIAE2AmAgACAAKAIAQQEgBXRyNgIAIAAgBUECdGoiACAAKAIEQQEgAnRyNgIEC80BAQJ/IAEgAksEQEEAQfAKQfkCQQ4QAAALIAFBE2pBcHFBBGshASAAKAKgDCIEBEAgBEEEaiABSwRAQQBB8ApBgANBEBAAAAsgAUEQayAERgRAIAQoAgAhAyABQRBrIQELBSAAQaQMaiABSwRAQQBB8ApBjQNBBRAAAAsLIAJBcHEgAWsiAkEUSQRADwsgASADQQJxIAJBCGsiAkEBcnI2AgAgAUEANgIEIAFBADYCCCABQQRqIAJqIgJBAjYCACAAIAI2AqAMIAAgARAHC5YBAQJ/PwAiAUEATAR/QQEgAWtAAEEASAVBAAsEQAALQeCSAkEANgIAQYCfAkEANgIAA0AgAEEXSQRAIABBAnRB4JICakEANgIEQQAhAQNAIAFBEEkEQCAAQQR0IAFqQQJ0QeCSAmpBADYCYCABQQFqIQEMAQsLIABBAWohAAwBCwtB4JICQYSfAj8AQRB0EAhB4JICJAkL8AMBA38CQAJAAkACQCMDDgMAAQIDC0EBJANBACQGEAUjAiQBIwYPCyMARSEBIwEoAgRBfHEhAANAIAAjAkcEQCAAJAEgASAAKAIEQQNxRwRAIAAgACgCBEF8cSABcjYCBEEAJAYgAEEUahAQIwYPCyAAKAIEQXxxIQAMAQsLQQAkBhAFIwIjASgCBEF8cUYEQCMMIQADQCAAQeCSAkkEQCAAKAIAIgIEQCACEBsLIABBBGohAAwBCwsjASgCBEF8cSEAA0AgACMCRwRAIAEgACgCBEEDcUcEQCAAIAAoAgRBfHEgAXI2AgQgAEEUahAQCyAAKAIEQXxxIQAMAQsLIwghACMCJAggACQCIAEkACAAKAIEQXxxJAFBAiQDCyMGDwsjASIAIwJHBEAgACgCBCIBQXxxJAEjAEUgAUEDcUcEQEEAQaAIQeUBQRQQAAALIABB4JICSQRAIABBADYCBCAAQQA2AggFIwQgACgCAEF8cUEEamskBCAAQQRqIgBB4JICTwRAIwlFBEAQCQsjCSEBIABBBGshAiAAQQ9xQQEgABsEf0EBBSACKAIAQQFxCwRAQQBB8ApBrwRBAxAAAAsgAiACKAIAQQFyNgIAIAEgAhAHCwtBCg8LIwIiACAANgIEIAAgADYCCEEAJAMLQQAL1AEBAn8gAUGAAkkEfyABQQR2BUEfIAFBAUEbIAFna3RqQQFrIAEgAUH+////AUkbIgFnayIDQQdrIQIgASADQQRrdkEQcwsiAUEQSSACQRdJcUUEQEEAQfAKQcoCQQ4QAAALIAAgAkECdGooAgRBfyABdHEiAQR/IAAgAWggAkEEdGpBAnRqKAJgBSAAKAIAQX8gAkEBanRxIgEEfyAAIAFoIgFBAnRqKAIEIgJFBEBBAEHwCkHXAkESEAAACyAAIAJoIAFBBHRqQQJ0aigCYAVBAAsLC7QEAQV/IABB7P///wNPBEBB8AlBoAhBhQJBHxAAAAsjBCMFTwRAAkBBgBAhAgNAIAIQCmshAiMDRQRAIwStQsgBfkLkAICnQYAIaiQFDAILIAJBAEoNAAsjBCICIAIjBWtBgAhJQQp0aiQFCwsjCUUEQBAJCyMJIQQgAEEQaiICQfz///8DSwRAQfAJQfAKQcoDQR0QAAALIARBDCACQRNqQXBxQQRrIAJBDE0bIgUQCyICRQRAPwAiAkEEIAQoAqAMIAJBEHRBBGtHdCAFQQFBGyAFZ2t0QQFraiAFIAVB/v///wFJG2pB//8DakGAgHxxQRB2IgMgAiADShtAAEEASARAIANAAEEASARAAAsLIAQgAkEQdD8AQRB0EAggBCAFEAsiAkUEQEEAQfAKQfADQRAQAAALCyAFIAIoAgBBfHFLBEBBAEHwCkHyA0EOEAAACyAEIAIQBiACKAIAIQMgBUEEakEPcQRAQQBB8ApB5QJBDhAAAAsgA0F8cSAFayIGQRBPBEAgAiAFIANBAnFyNgIAIAJBBGogBWoiAyAGQQRrQQFyNgIAIAQgAxAHBSACIANBfnE2AgAgAkEEaiACKAIAQXxxaiIDIAMoAgBBfXE2AgALIAIgATYCDCACIAA2AhAjCCIBKAIIIQMgAiABIwByNgIEIAIgAzYCCCADIAIgAygCBEEDcXI2AgQgASACNgIIIwQgAigCAEF8cUEEamokBCACQRRqIgFBACAA/AsAIAELYQEDfyAABEAgAEEUayIBKAIEQQNxQQNGBEBBwBFBoAhB0gJBBxAAAAsgARADIwciAygCCCECIAEgA0EDcjYCBCABIAI2AgggAiABIAIoAgRBA3FyNgIEIAMgATYCCAsgAAtuAQJ/IABFBEAPCyAAQRRrIgEoAgRBA3FBA0cEQEGAEkGgCEHgAkEFEAAACyMDQQFGBEAgARAEBSABEAMjCCIAKAIIIQIgASAAIwByNgIEIAEgAjYCCCACIAEgAigCBEEDcXI2AgQgACABNgIICws5ACMDQQBKBEADQCMDBEAQChoMAQsLCxAKGgNAIwMEQBAKGgwBCwsjBK1CyAF+QuQAgKdBgAhqJAULuQEBAX8CQAJAAkACQAJAAkACQAJAAkAgAEEIaygCAA4LAAECAwgEBwUIBwcGCw8LDwsPCyAAKAIAIgAEQCAAEBsLDwsPCyAAKAIAIgEEQCABEBsLIAAoAgQiAARAIAAQGwsPCwALIwxBBGskDCMMQeASSARAQYCTAkGwkwJBAUEBEAAACyMMIgFBADYCACABIAA2AgAgACgCACIABEAgABAbCyMMQQRqJAwPCyAAKAIEIgAEQCAAEBsLC8ABAQJ/QdQIQdAINgIAQdgIQdAINgIAQdAIJAI/AEEQdEHgkgJrQQF2JAVBpApBoAo2AgBBqApBoAo2AgBBoAokB0HECkHACjYCAEHICkHACjYCAEHACiQIIwxBDGskDCMMQeASSARAQYCTAkGwkwJBAUEBEAAACyMMIgBCADcDACAAQQA2AghBAEEFEAwiAUGgDEEA/AoAACAAIAE2AgAjDCIAQQA2AgQgACABNgIIIAEQEiEAIwxBDGokDCAAJAoL2gEBAn8jDEEMayQMAkAjDEHgEkgNACMMIgFCADcDACABQQA2AgggAUEIQQQQDCIBNgIAIwwiAiABNgIEIAFBADYCACACIAE2AgQgAkEEayQMIwxB4BJIDQAjDCICQQA2AgAgAkEAQQUQDCICNgIAIwxBBGokDCMMIAI2AgggASACNgIEIAIEQCABIAIQGgsjDCICIAE2AgQgAiAANgIIIAEgADYCBCAABEAgASAAEBoLIwwiACABNgIEIAFBADYCACAAQQxqJAwgAQ8LQYCTAkGwkwJBAUEBEAAAC3kBAn8jDEEMayQMIwxB4BJIBEBBgJMCQbCTAkEBQQEQAAALIwwiAkIANwMAIAJBADYCCCACQQhBCBAMIgI2AgAjDCIDIAI2AgQgAiAANgIAIAMgAjYCBCADIAE2AgggAiABNgIEIAEEQCACIAEQGgsjDEEMaiQMIAIL8wMBCX8jDEEQayQMAkAjDEHgEkgNACMMIgdCADcDACAHQgA3AwggByAANgIIIAcgACgCBCICNgIEIAcgADYCCCAAKAIAIQMgByAANgIIIAEgACgCAGohBCAHQQhrJAwjDEHgEkgNACMMIgVCADcDACAFIAI2AgAgAkEUaygCECEFIANBAEgEfyADIAVqIgNBACADQQBKGwUgAyAFIAMgBUgbCyEDIARBAEgEfyAEIAVqIgRBACAEQQBKGwUgBCAFIAQgBUgbCyEEIwwiCCACNgIEIAhBBGskDCMMQeASSA0AIwwiBUEANgIAIAUgBCADayIEQQAgBEEAShsiBEEBEAwiBTYCAEEQQQkQDCIGIAU2AgAgBQRAIAZFBEBBAEGgCEGnAkEOEAAACyMAIAVBFGsiCSgCBEEDcUYEQCAGQRRrKAIEQQNxIgojAEVGBEAgCRAEBSMDQQFGIApBA0ZxBEAgCRAECwsLCyAGIAU2AgQgBiAENgIIIAYgBDYCDCMMQQRqJAwgCCAGNgIEIwwgBjYCACAGKAIEIAIgA2ogBPwKAAAjDEEIaiQMIwwiAiAGNgIAIAcgBigCBCIDNgIMIAIgADYCACACIAA2AgQgACABIAAoAgBqNgIAIAJBEGokDCADDwtBgJMCQbCTAkEBQQEQAAALTgAjDEEEayQMIwxB4BJIBEBBgJMCQbCTAkEBQQEQAAALIwxBADYCACAABH8jDCAANgIAIABBFGsoAhBBAXYFQQALIQAjDEEEaiQMIABFC40BAQJ/IwxBDGskDCMMQeASSARAQYCTAkGwkwJBAUEBEAAACyMMIgJCADcDACACQQA2AgggAkEIQQcQDCICNgIAIwwiAyACNgIEIAMgADYCCCACIAA2AgAgAARAIAIgABAaCyMMIgAgAjYCBCAAIAE2AgggAiABNgIEIAEEQCACIAEQGgsjDEEMaiQMIAILhgYBA38jDEFAaiQMAkACQAJAAkAjDEHgEkgNACMMIgFBAEHAAPwLACABIAA2AgAgAUEMayQMIwxB4BJIDQAjDCICQgA3AwAgAkEANgIIIAIgADYCACAAKAIAQQRqIQMgAiAANgIEIAIgACgCBCICNgIAAn8gAyACQRRrKAIQSgRAIwxB4Aw2AghBAEHgDBATDAELIwwgADYCBCAAQQQQFCECIwwgAjYCACMMQQRrJAwjDEHgEkgNASMMIgNBADYCACADIAI2AgAgAigCACECIANBBGokDCACQQAQEwshAiMMQQxqJAwgASACNgIEIwwiASACNgIIIAEgAjYCDCABIAI2AhAgASACKAIEIgE2AgAgARAVBH8jDCIBIAA2AgAgACgCACEDIAEgAjYCFCABIAI2AhggASACNgIQIAEgAigCBCIBNgIAIAEQFUUEQCMMIgAgAjYCACAAIAIoAgQiADYCHCAARQ0DDAQLIwwiASACNgIgIAEgAjYCACADIAIoAgBqIQMgASAANgIQIAEgACgCBCIBNgIAIAMgAUEUaygCEEoFQQELBEAjDCIAQeAPNgIQIABBgBA2AiRB4A9BgBAQFiEADAQLIwwiASAANgIQIAEgAjYCKCABIAI2AiwgASACNgIwIAEgAigCBCIDNgIkIAMQFUUEQCMMIgAgAjYCJCAAIAIoAgQiADYCNCAARQ0CDAMLIwwiAyACNgI4IAMgAjYCJCAAIAIoAgAQFCEAIwwgADYCACMMQQRrJAwjDEHgEkgNACMMIgJBADYCACACIAA2AgACQCAAQRRrKAIQRQRAIwxBBGokDEHgDyEADAELIwwiAiAANgIAIAJBBGskDCMMQeASSA0BIwwiAkEANgIAIAIgADYCACAAIABBFGsoAhAQGCEAIwxBBGokDCMMQQRqJAwLIAEgADYCPCMMIAA2AhAgAEEAEBYhAAwDC0GAkwJBsJMCQQFBARAAAAtB8A1B8A5BxgBBFRAAAAsgAEHwDkHGAEEHEAAACyMMQUBrJAwgAAvAAwEFfyMMQQRrJAwjDEHgEkgEQEGAkwJBsJMCQQFBARAAAAsjDEEANgIAIAAiAiABaiEEIAIgBEsEQEEAQZARQYIGQQcQAAALIwwgAUEBdEECEAwiADYCACAAIQEDQCACIARJBEACQCACLQAAIQUgAkEBaiECIAVBgAFxBEAgAiAERg0BIAItAABBP3EhBiACQQFqIQIgBUHgAXFBwAFGBEAgASAFQR9xQQZ0IAZyOwEABSACIARGDQIgAi0AAEE/cSEDIAJBAWohAiAFQfABcUHgAUYEQCAFQQ9xQQx0IAZBBnRyIANyIQMFIAIgBEYNAyACLQAAQT9xIAVBB3FBEnQgBkEMdHIgA0EGdHJyIQMgAkEBaiECCyADQYCABEkEQCABIAM7AQAFIAEgA0GAgARrIgNBCnZBgLADciADQf8HcUGAuANyQRB0cjYCACABQQJqIQELCwUgASAFOwEACyABQQJqIQEMAgsLCwJAIAEgAGsiAiAAQRRrIgMoAgBBfHFBEGtNBEAgAyACNgIQDAELIAIgAygCDBAMIgEgACACIAMoAhAiACAAIAJLG/wKAAAgASEACyMMQQRqJAwgAAugAgECfyMMQQRrJAwCQCMMQeASSA0AIwwiASAANgIAIAFBIGskDCMMQeASSA0AIwxBAEEg/AsAEAEEQCMMIgEgADYCBCAAEBIhACMMIAA2AgAgASAAEBciADYCCCMMIAA2AgwjDCAANgIQIwwgACgCBCICNgIAIAIQFUUEQCMMIgEgADYCACABIAAoAgQiADYCFCAARQRAQfANQfAOQcYAQRUQAAALIABB8A5BxgBBBxAAAAsjDCICIAA2AhggAiAANgIAIAEgACgCACIANgIcIAIgADYCACACQQRrJAwjDEHgEkgNASMMIgFBADYCACABIAA2AgAgABACIwxBBGokDAsjDEEgaiQMIwxBBGokDA8LQYCTAkGwkwJBAUEBEAAAC1MAIABFBEBBAEGgCEGnAkEOEAAACyMAIAFBFGsiASgCBEEDcUYEQCAAQRRrKAIEQQNxIgAjAEVGBEAgARAEBSMDQQFGIABBA0ZxBEAgARAECwsLCyAAIwAgAEEUayIAKAIEQQNxRgRAIAAQBCMGQQFqJAYLCwvcCCUAQYwICwE8AEGYCAsnAgAAACAAAAB+AGwAaQBiAC8AcgB0AC8AaQB0AGMAbQBzAC4AdABzAEHsCAsBPABB+AgLKwIAAAAkAAAASQBuAGQAZQB4ACAAbwB1AHQAIABvAGYAIAByAGEAbgBnAGUAQawJCwEsAEG4CQsbAgAAABQAAAB+AGwAaQBiAC8AcgB0AC4AdABzAEHcCQsBPABB6AkLLwIAAAAoAAAAQQBsAGwAbwBjAGEAdABpAG8AbgAgAHQAbwBvACAAbABhAHIAZwBlAEHcCgsBPABB6AoLJQIAAAAeAAAAfgBsAGkAYgAvAHIAdAAvAHQAbABzAGYALgB0AHMAQZwLCwEsAEGoCwsjAgAAABwAAABJAG4AdgBhAGwAaQBkACAAbABlAG4AZwB0AGgAQcwLCwE8AEHYCwstAgAAACYAAAB+AGwAaQBiAC8AcwB0AGEAdABpAGMAYQByAHIAYQB5AC4AdABzAEGMDAsBHABBmAwLAQUAQawMCwEcAEG4DAsLAgAAAAQAAAA6ADoAQcwMCwGMAEHYDAt1AgAAAG4AAABjAGEAbgAnAHQAIABkAGUAcwBlAHIAaQBhAGwAaQB6AGUAIAB1ADMAMgAgAGYAcgBvAG0AIABnAGkAdgBlAG4AIABhAHIAZwB1AG0AZQBuAHQAOgAgAG8AdQB0ACAAbwBmACAAcgBhAG4AZwBlAEHcDQsBfABB6A0LZQIAAABeAAAAVQBuAGUAeABwAGUAYwB0AGUAZAAgACcAbgB1AGwAbAAnACAAKABuAG8AdAAgAGEAcwBzAGkAZwBuAGUAZAAgAG8AcgAgAGYAYQBpAGwAZQBkACAAYwBhAHMAdAApAEHcDgsBbABB6A4LXQIAAABWAAAAfgBsAGkAYgAvAEAAbQBhAHMAcwBhAGwAYQBiAHMALwBhAHMALQB0AHkAcABlAHMALwBhAHMAcwBlAG0AYgBsAHkALwByAGUAcwB1AGwAdAAuAHQAcwBBzA8LARwAQdgPCwECAEHsDwsBjABB+A8LewIAAAB0AAAAYwBhAG4AJwB0ACAAZABlAHMAZQByAGkAYQBsAGkAegBlACAAcwB0AHIAaQBuAGcAIABmAHIAbwBtACAAZwBpAHYAZQBuACAAYQByAGcAdQBtAGUAbgB0ADoAIABvAHUAdAAgAG8AZgAgAHIAYQBuAGcAZQBB/BALASwAQYgRCyMCAAAAHAAAAH4AbABpAGIALwBzAHQAcgBpAG4AZwAuAHQAcwBBrBELATwAQbgRCzECAAAAKgAAAE8AYgBqAGUAYwB0ACAAYQBsAHIAZQBhAGQAeQAgAHAAaQBuAG4AZQBkAEHsEQsBPABB+BELLwIAAAAoAAAATwBiAGoAZQBjAHQAIABpAHMAIABuAG8AdAAgAHAAaQBuAG4AZQBkAEGwEgsNCwAAACAAAAAgAAAAIABByBILBmQAAAACAQBB2BILBkIAAAACCQAnEHNvdXJjZU1hcHBpbmdVUkwVLi9oZWxsb3dvcmxkLndhc20ubWFw"
      });

      let k = 0;
      const intr = setInterval(async() => {
        const eventsFilter = {
          start: null,
          end: null,
          original_caller_address: null,
          original_operation_id: hash,
          emitter_address: null,
        };
        const response = await bearby.contract.getFilteredSCOutputEvent(eventsFilter);
        if (response && response.result && response.result[0] && response.result[0].data) {
          clearInterval(intr);
          window.contract = String(response.result[0].data).replace('Address:', '');
          console.log(window.contract);
          alert(window.contract);
        }

        console.log(response);

        if (k > 10) {
          clearInterval(intr);
        }
        k += 1;
      }, 4000);
    }

    async function executeBytecode() {

      const name = 'ElonMars'
      const datastore = new Map()
      datastore.set(massaWeb3.strToBytes('name_key'), massaWeb3.strToBytes(name))

      const hash = await bearby.contract.executeBytecode({
          fee: 10_000_0000n,
          maxGas: 3980167295n,
          maxCoins: 1_000_000_0000n,
          coins: 100000000n,
          bytecodeBase64: "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",
          datastore,
      });

      let k = 0;
      const intr = setInterval(async() => {
        const eventsFilter = {
          start: null,
          end: null,
          original_caller_address: null,
          original_operation_id: hash,
          emitter_address: null,
        };
        const response = await bearby.contract.getFilteredSCOutputEvent(eventsFilter);
        if (response.length && response[0].result?.length) {
          console.log("Message received:", response[0].result[0].data);
          clearInterval(intr);
        } else {
          console.log(response);
        }

        if (k > 10) {
          clearInterval(intr);
        }
        k += 1;
      }, 4000);
    }

    async function readBalance() {
      const data = await bearby.contract.readSmartContract({
        fee: 0,
        maxGas: 2100000,
        simulatedGasPrice: 0,
        targetAddress: "AS12Emra1SrLsFgYdFRQXBjsksWummAs8zG14iFytS73bZBjbVY5v",
        targetFunction: "balanceOf",
        parameter: [
          {
            type: bearby.contract.types.STRING,
            value: "AU1aFiPAan1ucLZjS6iREznGYHHpTseRFAXEYvYsbCocU9RL64GW"
          },
        ]
      });
      console.log('readSmartContract',  data[0].result[0]);
    }

    async function getDatastoreEntries() {
      const data = await bearby.contract.getDatastoreEntries({address: USDC, key: 'SYMBOL'});
      console.log('Datastore data:',  data[0].result[0]);
    }

    async function getNodesStatus() {
      const network = await bearby.wallet.network
      console.log("network", network)
      const data = await bearby.massa.getNodesStatus()
      console.log('getNodesStatus',  data);
    }

    async function transfer() {
      const hash = await bearby.contract.call({
        maxGas: 2000000,
        coins: 0,
        targetAddress: "AS1brg4nueUAT41sm8eRZrmYndUgkAhs2hwEkJD4N8UejtK2Qa9C",
        functionName: 'transfer',
        parameter: [
          {
            type: bearby.contract.types.STRING,
            value: "Hello, World!"
          },
          {
            type: bearby.contract.types.BOOL,
            value: true
          },
          {
            type: bearby.contract.types.F64,
            value: 32
          },
          {
            type: bearby.contract.types.U256,
            value: '435435345234324324324323243242398854684'
          }
        ]
      });

      console.log(hash);
    }

    async function testunsafe() {
      const hash = await bearby.contract.call({
        maxGas: 1000000,
        coins: 0,
        fee: 1000,
        targetAddress: "AS1X4atEfMdoV4Rj9agjgpowsFgdZULpCig6SXhyX22kgnHMqK4y",
        functionName: "logEventArgAll",
        unsafeParameters: [
            2,   0,   0,   0,   1,  2, 3,   0,   0,  0,
           49,  49,  49,   9,   0,  0, 0, 114, 101, 99,
          101, 105, 118, 101, 114, 49, 3,   0,   0,  0,
           77,  65,  83,   0,   0,  0, 0
        ]
      });

      console.log(hash);
    }

    async function test_req_pub_key() {
      const pubkey = await bearby.wallet.requestPubKey();
      console.log(pubkey);
    }

    async function test_sign() {
      const res = await bearby.wallet.signMessage("test");

      console.log(res);
    }

    async function test_payment() {
      const res = await bearby.massa.payment("2000000000", "AU1PjA6nuV79B1iqTKbUeYz2bFY9oEFUQkyWftPCaxwXR7tyNZnM");

      console.log(res);
    }

    console.log(bearby);
  </script>
</body>
</html>
